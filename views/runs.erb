<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
    <script src="//api.tiles.mapbox.com/mapbox.js/v2.2.1/mapbox.js"></script>
    <script src="//api.tiles.mapbox.com/mapbox.js/plugins/turf/v2.0.0/turf.min.js"></script>
    <script src="http://d3js.org/queue.v1.min.js"></script>
    <link href='https://api.tiles.mapbox.com/mapbox.js/v2.2.1/mapbox.css' rel='stylesheet' />
    <link href="style.css" rel="stylesheet" />
</head>
<body>
<div id="main" class='container'>
    <div class="screen" id="screen_1">
        <p>In may I completed my second marathon. I ran 42K on a sunny day in Copenhagen.</p>
        <p>This is how I trained to complete it.</p>
    </div>
    <div class="screen" id="screen_2">
        <p>I started rather slow. I ran only around 6-7 km per run during my first week. First run that as longer than 10 km was during second week of training.</p>
    </div>
    <div class="screen" id="screen_3">
        <p>Then I started interval trainings that were tough. I ran familiar routes this time and focusing on improving my tempo.</p>
        <p>And then my toughest run happened: 20K along the sea during a storm. That was extreme!</p>
    </div>
    <div id="map"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="helpers.js"></script>
<script src="screens.js"></script>
<script>
    L.mapbox.accessToken = 'pk.eyJ1IjoiYmFyc3Vrb3YiLCJhIjoiTGE4SjZUUSJ9.GlJoUBEGTTNJVltire9ZXA';
    var map = L.mapbox.map('map', 'barsukov.ef038316', {zoomControl:false })
            .setView([55.636098, 12.568337], 13);

    map._initPathRoot();

    var svg = d3.select("#map").select("svg"),
            g = svg.append("g");

    var path = d3.geo.path().projection(function(e) {
        var point = map.latLngToLayerPoint(new L.LatLng(e[1],e[0]));
        return [point.x,point.y];
    });
    SCREEN_NUMBER = 1;
    MAX_SCREENS = 3
    $(document).ready(function(){
         window["show_screen_" + SCREEN_NUMBER]()
        $('body' ).click(function() {
            if(SCREEN_NUMBER < MAX_SCREENS){
                SCREEN_NUMBER +=1
                window["show_screen_" + SCREEN_NUMBER]()
            }

        });
        $(document).keydown(function(e) {
            switch(e.which) {
                case 37:
                    if(SCREEN_NUMBER > 1){
                        SCREEN_NUMBER = SCREEN_NUMBER - 1
                        window["show_screen_" + SCREEN_NUMBER]()
                    }
                    e.preventDefault();
                    break;
                case 39:
                    if(SCREEN_NUMBER < MAX_SCREENS){
                        SCREEN_NUMBER = SCREEN_NUMBER + 1
                        window["show_screen_" + SCREEN_NUMBER]()
                    }
                    e.preventDefault();
                    break;
                default: return
            }
        });

    })



</script>
</body>
</html>


